(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1060:function(t,e,n){"use strict";n.d(e,"a",(function(){return dt})),n.d(e,"b",(function(){return Z}));var r=n(1061),o=n(906),h=n(971),c=function(){return(c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function l(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function h(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,h)}s((i=i.apply(t,e||[])).next())}))}function f(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function h(o){return function(h){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}var d=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],v={runtime:"mediapipe",maxHands:2,modelType:"full"},y=function(){function i(t){var e,i=this;if("lite"===(this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new r.Hands({locateFile:function(e,n){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+e:n+"/"+e}}),t.modelType))e=0;else e=1;this.handsSolution.setOptions({modelComplexity:e,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults((function(t){if(i.height=t.image.height,i.width=t.image.width,i.hands=[],null!==t.multiHandLandmarks)for(var e=t.multiHandedness,n=t.multiHandLandmarks,r=t.multiHandWorldLandmarks,o=0;o<e.length;o++)i.hands.push(c(c({},i.translateOutput(n[o],r[o])),{score:e[o].score,handedness:e[o].label}))}))}return i.prototype.translateOutput=function(t,e){var n=this;return{keypoints:t.map((function(t,e){return{x:t.x*n.width,y:t.y*n.height,score:t.visibility,name:d[e]}})),keypoints3D:e.map((function(t,e){return{x:t.x,y:t.y,z:t.z,score:t.visibility,name:d[e]}}))}},i.prototype.estimateHands=function(t,i){return l(this,void 0,void 0,(function(){var e,n;return f(this,(function(a){switch(a.label){case 0:return i&&i.flipHorizontal&&i.flipHorizontal!==this.selfieMode&&(this.selfieMode=i.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),t instanceof o.Cc?(n=ImageData.bind,[4,o.Rc.toPixels(t)]):[3,2];case 1:return e=new(n.apply(ImageData,[void 0,a.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:e=t,a.label=3;case 3:return t=e,[4,this.handsSolution.send({image:t})];case 4:return a.sent(),[2,this.hands]}}))}))},i.prototype.dispose=function(){this.handsSolution.close()},i.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},i.prototype.initialize=function(){return this.handsSolution.initialize()},i}();function m(t){return l(this,void 0,void 0,(function(){var e,n;return f(this,(function(i){switch(i.label){case 0:return e=function(t){if(null==t)return c({},v);var e=c({},t);return e.runtime="mediapipe",null==e.maxHands&&(e.maxHands=v.maxHands),null==e.modelType&&(e.modelType=v.modelType),e}(t),[4,(n=new y(e)).initialize()];case 1:return i.sent(),[2,n]}}))}))}function w(t){return t.width*t.height}function x(t){var e=t.xCenter-t.width/2,n=e+t.width,i=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:i,yMax:i+t.height,width:t.width,height:t.height}}function j(t,e){var n=x(t),i=x(e);if(!function(t,e){return!(t.xMax<e.xMin||e.xMax<t.xMin||t.yMax<e.yMin||e.yMax<t.yMin)}(n,i))return 0;var r=w(function(t,e){var n=Math.max(t.xMin,e.xMin),i=Math.min(t.xMax,e.xMax),r=Math.max(t.yMin,e.yMin),o=Math.min(t.yMax,e.yMax);return{xMin:n,xMax:i,yMin:r,yMax:o,width:Math.max(i-n,0),height:Math.max(o-r,0)}}(n,i)),o=w(n)+w(i)-r;return o>0?r/o:0}function O(t){return t instanceof o.Cc?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function M(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function A(t){return t instanceof o.Cc?t:o.Rc.fromPixels(t)}function _(t,e){o.Ed.assert(0!==t.width,(function(){return e+" width cannot be 0."})),o.Ed.assert(0!==t.height,(function(){return e+" height cannot be 0."}))}function T(t,e,n){var i=e.outputTensorSize,r=e.keepAspectRatio,a=e.borderMode,h=e.outputTensorFloatRange,c=O(t),l=function(t,e){return e?{xCenter:e.xCenter*t.width,yCenter:e.yCenter*t.height,width:e.width*t.width,height:e.height*t.height,rotation:e.rotation}:{xCenter:.5*t.width,yCenter:.5*t.height,width:t.width,height:t.height,rotation:0}}(c,n),p=function(t,e,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var i=e.height,r=e.width;_(e,"targetSize"),_(t,"roi");var o,a,h=i/r,s=t.height/t.width,u=0,c=0;return h>s?(o=t.width,a=t.width*h,c=(1-s/h)/2):(o=t.height/h,a=t.height,u=(1-h/s)/2),t.width=o,t.height=a,{top:c,left:u,right:u,bottom:c}}(l,i,r),f=function(t,e,n,i){var r=t.width,o=t.height,a=i?-1:1,h=Math.cos(t.rotation),s=Math.sin(t.rotation),u=t.xCenter,c=t.yCenter,l=1/e,f=1/n,d=new Array(16);return d[0]=r*h*a*l,d[1]=-o*s*l,d[2]=0,d[3]=(-.5*r*h*a+.5*o*s+u)*l,d[4]=r*s*a*f,d[5]=o*h*f,d[6]=0,d[7]=(-.5*o*h-.5*r*s*a+c)*f,d[8]=0,d[9]=0,d[10]=r*l,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,function(t){if(16!==t.length)throw new Error("Array length must be 16 but got "+t.length);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}(d)}(l,c.width,c.height,!1);return{imageTensor:Object(o.Bd)((function(){var e=A(t),n=Object(o.Ad)(function(t,e,n){return _(n,"inputResolution"),[1/n.width*t[0][0]*e.width,1/n.height*t[0][1]*e.width,t[0][3]*e.width,1/n.width*t[1][0]*e.height,1/n.height*t[1][1]*e.height,t[1][3]*e.height,0,0]}(f,c,i),[1,8]),r="zero"===a?"constant":"nearest",l=o.ed.transform(Object(o.cd)(Object(o.Tc)(e,"float32")),n,"bilinear",r,0,[i.height,i.width]);return null!=h?function(t,e){var n=function(t,e,n,i){var a=(i-n)/255;return{scale:a,offset:n-0*a}}(0,0,e[0],e[1]);return Object(o.Bd)((function(){return Object(o.Lc)(Object(o.kd)(t,n.scale),n.offset)}))}(l,h):l})),padding:p,transformationMatrix:f}}function S(t,e,n,i){return 1===i?.5*(t+e):t+(e-t)*n/(i-1)}function k(t){return{xCenter:t.xMin+t.width/2,yCenter:t.yMin+t.height/2,width:t.width,height:t.height}}function C(t){var e=t.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MIN_VALUE;return e.forEach((function(t){n=Math.min(n,t.x),r=Math.max(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.y)})),{xCenter:(n+r)/2,yCenter:(i+o)/2,width:r-n,height:o-i}}function E(t,e,n,i){return l(this,void 0,void 0,(function(){var i,r,h,a,u;return f(this,(function(c){switch(c.label){case 0:return t.sort((function(t,e){return Math.max.apply(Math,e.score)-Math.max.apply(Math,t.score)})),i=Object(o.Ad)(t.map((function(t){return[t.locationData.relativeBoundingBox.yMin,t.locationData.relativeBoundingBox.xMin,t.locationData.relativeBoundingBox.yMax,t.locationData.relativeBoundingBox.xMax]}))),r=Object(o.zd)(t.map((function(t){return t.score[0]}))),[4,o.ed.nonMaxSuppressionAsync(i,r,e,n)];case 1:return[4,(h=c.sent()).array()];case 2:return a=c.sent(),u=t.filter((function(t,e){return a.indexOf(e)>-1})),Object(o.Xc)([i,r,h]),[2,u]}}))}))}function I(t,e){return t.map((function(t){var n=c(c({},t),{x:t.x*e.width,y:t.y*e.height});return null!=t.z&&(n.z=t.z*e.width),n}))}function F(t,e,n){return l(this,void 0,void 0,(function(){var i,r,s,u,h;return f(this,(function(p){switch(p.label){case 0:return i=t[0],r=t[1],s=function(t,e,n){return Object(o.Bd)((function(){var i,r,h,s;n.reverseOutputOrder?(r=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+0],[-1,1])),i=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+1],[-1,1])),s=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+2],[-1,1])),h=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+3],[-1,1]))):(i=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+0],[-1,1])),r=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+1],[-1,1])),h=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+2],[-1,1])),s=Object(o.ud)(Object(o.rd)(t,[0,n.boxCoordOffset+3],[-1,1]))),r=Object(o.Lc)(Object(o.kd)(Object(o.Yc)(r,n.xScale),e.w),e.x),i=Object(o.Lc)(Object(o.kd)(Object(o.Yc)(i,n.yScale),e.h),e.y),n.applyExponentialOnBoxSize?(h=Object(o.kd)(Object(o.bd)(Object(o.Yc)(h,n.hScale)),e.h),s=Object(o.kd)(Object(o.bd)(Object(o.Yc)(s,n.wScale)),e.w)):(h=Object(o.kd)(Object(o.Yc)(h,n.hScale),e.h),s=Object(o.kd)(Object(o.Yc)(s,n.wScale),e.h));var u=Object(o.wd)(i,Object(o.Yc)(h,2)),c=Object(o.wd)(r,Object(o.Yc)(s,2)),l=Object(o.Lc)(i,Object(o.Yc)(h,2)),p=Object(o.Lc)(r,Object(o.Yc)(s,2)),f=Object(o.Wc)([Object(o.od)(u,[n.numBoxes,1]),Object(o.od)(c,[n.numBoxes,1]),Object(o.od)(l,[n.numBoxes,1]),Object(o.od)(p,[n.numBoxes,1])],1);if(n.numKeypoints)for(var d=0;d<n.numKeypoints;++d){var b=n.keypointCoordOffset+d*n.numValuesPerKeypoint,v=void 0,y=void 0;n.reverseOutputOrder?(v=Object(o.ud)(Object(o.rd)(t,[0,b],[-1,1])),y=Object(o.ud)(Object(o.rd)(t,[0,b+1],[-1,1]))):(y=Object(o.ud)(Object(o.rd)(t,[0,b],[-1,1])),v=Object(o.ud)(Object(o.rd)(t,[0,b+1],[-1,1])));var m=Object(o.Lc)(Object(o.kd)(Object(o.Yc)(v,n.xScale),e.w),e.x),w=Object(o.Lc)(Object(o.kd)(Object(o.Yc)(y,n.yScale),e.h),e.y);f=Object(o.Wc)([f,Object(o.od)(m,[n.numBoxes,1]),Object(o.od)(w,[n.numBoxes,1])],1)}return f}))}(r,e,n),u=Object(o.Bd)((function(){var t=i;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(t=Object(o.Uc)(i,-n.scoreClippingThresh,n.scoreClippingThresh)),t=Object(o.qd)(t)):t})),[4,q(s,u,n)];case 1:return h=p.sent(),Object(o.Xc)([s,u]),[2,h]}}))}))}function q(t,e,n){return l(this,void 0,void 0,(function(){var i,r,o,a,h,s,u,c,l,d,v,p;return f(this,(function(f){switch(f.label){case 0:return i=[],[4,t.data()];case 1:return r=f.sent(),[4,e.data()];case 2:for(o=f.sent(),a=0;a<n.numBoxes;++a)if(!(null!=n.minScoreThresh&&o[a]<n.minScoreThresh||(h=a*n.numCoords,s=R(r[h+0],r[h+1],r[h+2],r[h+3],o[a],n.flipVertically,a),(u=s.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((c=s.locationData).relativeKeypoints=[],l=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<l;d+=n.numValuesPerKeypoint)v=h+n.keypointCoordOffset+d,p={x:r[v+0],y:n.flipVertically?1-r[v+1]:r[v+1]},c.relativeKeypoints.push(p);i.push(s)}return[2,i]}}))}))}function R(t,e,n,i,r,o,a){return{score:[r],ind:a,locationData:{relativeBoundingBox:{xMin:e,yMin:o?1-n:t,xMax:i,yMax:o?1-t:n,width:i-e,height:n-t}}}}function B(t,e){return"none"===t?e:function(t){return 1/(1+Math.exp(-t))}(e)}function L(t,e,n,i){return l(this,void 0,void 0,(function(){var r,o,a,h,s,u,c,l;return f(this,(function(f){switch(f.label){case 0:return n=n||e.flipHorizontally||!1,i=i||e.flipVertically||!1,r=t.size,o=r/e.numLandmarks,[4,t.data()];case 1:for(a=f.sent(),h=[],s=0;s<e.numLandmarks;++s)u=s*o,(l={x:0,y:0}).x=n?e.inputImageWidth-a[u]:a[u],o>1&&(l.y=i?e.inputImageHeight-a[u+1]:a[u+1]),o>2&&(l.z=a[u+2]),o>3&&(l.score=B(e.visibilityActivation,a[u+3])),h.push(l);for(c=0;c<h.length;++c)(l=h[c]).x=l.x/e.inputImageWidth,l.y=l.y/e.inputImageHeight,l.z=l.z/e.inputImageWidth/(e.normalizeZ||1);return[2,h]}}))}))}function N(t,e,n){var i=t.width,r=t.height,o=t.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(t,e){return null!=e.rotation?t+=e.rotation:null!=e.rotationDegree&&(t+=Math.PI*e.rotationDegree/180),M(t)}(o,n)),0===o)t.xCenter=t.xCenter+i*n.shiftX,t.yCenter=t.yCenter+r*n.shiftY;else{var a=(e.width*i*n.shiftX*Math.cos(o)-e.height*r*n.shiftY*Math.sin(o))/e.width,h=(e.width*i*n.shiftX*Math.sin(o)+e.height*r*n.shiftY*Math.cos(o))/e.height;t.xCenter=t.xCenter+a,t.yCenter=t.yCenter+h}if(n.squareLong){var s=Math.max(i*e.width,r*e.height);i=s/e.width,r=s/e.height}else if(n.squareShort){var u=Math.min(i*e.width,r*e.height);i=u/e.width,r=u/e.height}return t.width=i*n.scaleX,t.height=r*n.scaleY,t}var dt,P={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},U={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},H={flipHorizontal:!1,staticImageMode:!1},z={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},D={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},V={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},Y={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},X={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},W={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},G={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},K=function(){function t(t,e,n){this.detectorModel=t,this.landmarkModel=e,this.maxHands=n,this.prevHandRectsFromLandmarks=null,this.anchors=function(t){null==t.reduceBoxesInLowestLayer&&(t.reduceBoxesInLowestLayer=!1),null==t.interpolatedScaleAspectRatio&&(t.interpolatedScaleAspectRatio=1),null==t.fixedAnchorSize&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var i=[],r=[],o=[],a=[],h=n;h<t.strides.length&&t.strides[h]===t.strides[n];){var s=S(t.minScale,t.maxScale,h,t.strides.length);if(0===h&&t.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),a.push(.1),a.push(s),a.push(s);else{for(var u=0;u<t.aspectRatios.length;++u)o.push(t.aspectRatios[u]),a.push(s);if(t.interpolatedScaleAspectRatio>0){var c=h===t.strides.length-1?1:S(t.minScale,t.maxScale,h+1,t.strides.length);a.push(Math.sqrt(s*c)),o.push(t.interpolatedScaleAspectRatio)}}h++}for(var l=0;l<o.length;++l){var f=Math.sqrt(o[l]);i.push(a[l]/f),r.push(a[l]*f)}var d=0,p=0;if(t.featureMapHeight.length>0)d=t.featureMapHeight[n],p=t.featureMapWidth[n];else{var v=t.strides[n];d=Math.ceil(t.inputSizeHeight/v),p=Math.ceil(t.inputSizeWidth/v)}for(var g=0;g<d;++g)for(var y=0;y<p;++y)for(var m=0;m<i.length;++m){var w={xCenter:(y+t.anchorOffsetX)/p,yCenter:(g+t.anchorOffsetY)/d,width:0,height:0};t.fixedAnchorSize?(w.width=1,w.height=1):(w.width=r[m],w.height=i[m]),e.push(w)}n=h}return e}(P);var i=Object(o.zd)(this.anchors.map((function(t){return t.width}))),r=Object(o.zd)(this.anchors.map((function(t){return t.height}))),h=Object(o.zd)(this.anchors.map((function(t){return t.xCenter}))),a=Object(o.zd)(this.anchors.map((function(t){return t.yCenter})));this.anchorTensor={x:h,y:a,w:i,h:r}}return t.prototype.estimateHands=function(t,e){return l(this,void 0,void 0,(function(){var n,i,r,a,h,l,v,p,y,g,m,w,x,M,_,b,T,S,k=this;return f(this,(function(f){switch(f.label){case 0:return n=function(t){if(null==t)return c({},H);var e=c({},t);return null==e.flipHorizontal&&(e.flipHorizontal=H.flipHorizontal),null==e.staticImageMode&&(e.staticImageMode=H.staticImageMode),e}(e),null==t?(this.reset(),[2,[]]):(i=O(t),r=Object(o.Bd)((function(){var e=Object(o.Tc)(A(t),"float32");return n.flipHorizontal&&(e=Object(o.ud)(o.ed.flipLeftRight(Object(o.cd)(e,0)),[0])),e})),a=this.prevHandRectsFromLandmarks,n.staticImageMode||null==a||a.length<this.maxHands?[4,this.detectPalm(r)]:[3,2]);case 1:return 0===(l=f.sent()).length?(this.reset(),r.dispose(),[2,[]]):(v=l.map((function(t){return k.palmDetectionToRoi(t,i)})),h=v,[3,3]);case 2:h=a,f.label=3;case 3:return.5,C=[],[h].forEach((function(t){return t.forEach((function(t){(C=C.filter((function(e){return j(t,e)<=.5}))).push(t)}))})),h=C,[4,Promise.all(h.map((function(t){return k.handLandmarks(t,r)})))];case 4:for(p=f.sent(),y=[],this.prevHandRectsFromLandmarks=[],g=0,m=p;g<m.length;g++)null!=(w=m[g])&&(x=w.landmarks,M=w.worldLandmarks,_=w.handScore,b=w.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(x,i)),null!=(T=I(x,i))&&T.forEach((function(t,e){delete t.z,t.name=d[e]})),null!=(S=M)&&S.forEach((function(t,e){t.name=d[e]})),y.push({keypoints:T,keypoints3D:S,handedness:b,score:_}));return r.dispose(),[2,y]}var C}))}))},t.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),Object(o.Xc)([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},t.prototype.detectPalm=function(t){return l(this,void 0,void 0,(function(){var e,n,i,r,h,a,c,s,u,l;return f(this,(function(f){switch(f.label){case 0:return e=T(t,Y),n=e.imageTensor,i=e.padding,r=this.detectorModel.predict(n),h=function(t){return Object(o.Bd)((function(){var e=function(t){return Object(o.Bd)((function(){return[Object(o.rd)(t,[0,0,0],[1,-1,1]),Object(o.rd)(t,[0,0,1],[1,-1,-1])]}))}(t),n=e[0],i=e[1];return{boxes:Object(o.ud)(i),logits:Object(o.ud)(n)}}))}(r),a=h.boxes,[4,F([c=h.logits,a],this.anchorTensor,z)];case 1:return 0===(s=f.sent()).length?(Object(o.Xc)([n,r,c,a]),[2,s]):[4,E(s,this.maxHands,.3)];case 2:return u=f.sent(),l=function(t,e){void 0===t&&(t=[]);for(var n=e.left,i=e.top,r=e.left+e.right,o=e.top+e.bottom,a=0;a<t.length;a++){var h=t[a],s=h.locationData.relativeBoundingBox,u=(s.xMin-n)/(1-r),c=(s.yMin-i)/(1-o),l=s.width/(1-r),f=s.height/(1-o);s.xMin=u,s.yMin=c,s.width=l,s.height=f,s.xMax=u+l,s.yMax=c+f;var d=h.locationData.relativeKeypoints;d&&d.forEach((function(t){var e=(t.x-n)/(1-r),a=(t.y-i)/(1-o);t.x=e,t.y=a}))}return t}(u,i),Object(o.Xc)([n,r,c,a]),[2,l]}}))}))},t.prototype.palmDetectionToRoi=function(t,e){return N(function(t,e,n,i,r){var o="rect"===n?function(t,e,n){var i,r=t.locationData;if("boundingbox"===e)i=k(r.boundingBox);else{i=C(r);var o=n.width,a=n.height;i.xCenter=Math.round(i.xCenter*o),i.yCenter=Math.round(i.yCenter*a),i.width=Math.round(i.width*o),i.height=Math.round(i.height*a)}return i}(t,e,i):function(t,e){var n=t.locationData;return"boundingbox"===e?k(n.relativeBoundingBox):C(n)}(t,e);return r&&(o.rotation=function(t,e,n){var i,r=t.locationData,o=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex;i=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var h=r.relativeKeypoints[o].x*e.width,s=r.relativeKeypoints[o].y*e.height,u=r.relativeKeypoints[a].x*e.width,c=r.relativeKeypoints[a].y*e.height;return M(i-Math.atan2(-(c-s),u-h))}(t,i,r)),o}(t,"boundingbox","normRect",e,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),e,D)},t.prototype.handLandmarks=function(t,e){return l(this,void 0,void 0,(function(){var n,i,r,h,a,l,s,u,d,v,y,p,m,g,w,x;return f(this,(function(f){switch(f.label){case 0:return n=T(e,X,t),i=n.imageTensor,r=n.padding,h=this.landmarkModel.execute(i,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),a=h[0],l=h[1],s=h[2],u=h[3],[4,l.data()];case 1:return(d=f.sent()[0])<.5?(Object(o.Xc)(h),Object(o.Xc)(i),[2,null]):[4,s.data()];case 2:return v=f.sent()[0],y=v>=.5?"Left":"Right",[4,L(a,W)];case 3:return p=f.sent(),[4,L(u,G)];case 4:return m=f.sent(),g=function(t,e){var n=e.left,i=e.top,r=e.left+e.right,o=e.top+e.bottom;return t.map((function(t){return c(c({},t),{x:(t.x-n)/(1-r),y:(t.y-i)/(1-o),z:t.z/(1-r)})}))}(p,r),w=function(t,e,n){void 0===n&&(n={ignoreRotation:!1});for(var i=[],r=0,o=t;r<o.length;r++){var a=o[r],h=a.x-.5,s=a.y-.5,u=n.ignoreRotation?0:e.rotation,l=Math.cos(u)*h-Math.sin(u)*s,f=Math.sin(u)*h+Math.cos(u)*s;l=l*e.width+e.xCenter,f=f*e.height+e.yCenter;var d=a.z*e.width,v=c({},a);v.x=l,v.y=f,v.z=d,i.push(v)}return i}(g,t),x=function(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i],a=o.x,h=o.y,s=e.rotation,u=Math.cos(s)*a-Math.sin(s)*h,l=Math.sin(s)*a+Math.cos(s)*h,f=c({},o);f.x=u,f.y=l,n.push(f)}return n}(m,t),Object(o.Xc)(h),Object(o.Xc)(i),[2,{landmarks:w,worldLandmarks:x,handScore:d,handedness:y}]}}))}))},t.prototype.handLandmarksToRoi=function(t,e){return N(function(t,e){for(var n=function(t,e){var n=t[0].x*e.width,i=t[0].y*e.height,r=(t[4].x+t[8].x)/2,o=(t[4].y+t[8].y)/2;return r=(r+t[6].x)/2*e.width,o=(o+t[6].y)/2*e.height,M(Math.PI/2-Math.atan2(-(o-i),r-n))}(t,e),i=M(-n),r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,s=0,u=t;s<u.length;s++){var c=(g=u[s]).x,l=g.y;r=Math.min(r,c),o=Math.max(o,c),a=Math.min(a,l),h=Math.max(h,l)}var f=(o+r)/2,d=(h+a)/2;r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(var p=0,v=t;p<v.length;p++){var g,y=((g=v[p]).x-f)*e.width,m=(g.y-d)*e.height,w=y*Math.cos(i)-m*Math.sin(i),x=y*Math.sin(i)+m*Math.cos(i);r=Math.min(r,w),o=Math.max(o,w),a=Math.min(a,x),h=Math.max(h,x)}var j=(o+r)/2,b=(h+a)/2,O=j*Math.cos(n)-b*Math.sin(n)+e.width*f,A=j*Math.sin(n)+b*Math.cos(n)+e.height*d,_=(o-r)/e.width,T=(h-a)/e.height;return{xCenter:O/e.width,yCenter:A/e.height,width:_,height:T,rotation:n}}([].concat(t.slice(0,4),t.slice(5,7),t.slice(9,11),t.slice(13,15),t.slice(17,19)),e),e,V)},t}();function J(t){return l(this,void 0,void 0,(function(){var e,n,i,r,o,a;return f(this,(function(l){switch(l.label){case 0:return e=function(t){if(null==t)return c({},U);var e=c({},t);if(e.runtime="tfjs",null==e.maxHands&&(e.maxHands=U.maxHands),null==e.modelType&&(e.modelType=U.modelType),"lite"!==e.modelType&&"full"!==e.modelType)throw new Error("Model type must be one of lite or full, but got "+e.modelType);if(null==e.detectorModelUrl)if("lite"===e.modelType)e.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1";else e.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1";if(null==e.landmarkModelUrl)if("lite"===e.modelType)e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1";else e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1";return e}(t),n=e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,i=e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([Object(h.a)(e.detectorModelUrl,{fromTFHub:n}),Object(h.a)(e.landmarkModelUrl,{fromTFHub:i})])];case 1:return r=l.sent(),o=r[0],a=r[1],[2,new K(o,a,e.maxHands)]}}))}))}function Z(t,e){return l(this,void 0,void 0,(function(){var n,i;return f(this,(function(r){if(t===dt.MediaPipeHands){if(i=void 0,null!=(n=e)){if("tfjs"===n.runtime)return[2,J(n)];if("mediapipe"===n.runtime)return[2,m(n)];i=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+i)}throw new Error(t+" is not a supported model name.")}))}))}(dt||(dt={})).MediaPipeHands="MediaPipeHands"},1061:function(t,e,n){(function(t){(function(){"use strict";var e;function n(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){return a==Array.prototype||a==Object.prototype||(a[b]=t.value),a};var o=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}throw Error("Cannot find global object")}(this);function h(a,b){if(b)t:{var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var n=a[e];if(!(n in t))break t;t=t[n]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&r(t,a,{configurable:!0,writable:!0,value:b})}}function c(a){return(a={next:a})[Symbol.iterator]=function(){return this},a}function l(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:n(a)}}function f(a){if(!(a instanceof Array)){a=l(a);for(var b,t=[];!(b=a.next()).done;)t.push(b.value);a=t}return a}h("Symbol",(function(a){function t(g,t){this.h=g,r(this,"description",{configurable:!0,writable:!0,value:t})}if(a)return a;t.prototype.toString=function(){return this.h};var e="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0;return function b(g){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new t(e+(g||"")+"_"+n++,g)}})),h("Symbol.iterator",(function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),t=0;t<b.length;t++){var e=o[b[t]];"function"==typeof e&&"function"!=typeof e.prototype[a]&&r(e.prototype,a,{configurable:!0,writable:!0,value:function(){return c(n(this))}})}return a}));var d="function"==typeof Object.assign?Object.assign:function(a,b){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a};h("Object.assign",(function(a){return a||d}));var v,y="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b};if("function"==typeof Object.setPrototypeOf)v=Object.setPrototypeOf;else{var m;t:{var w={};try{w.__proto__={a:!0},m=w.a;break t}catch(t){}m=!1}v=m?function(a,b){if(a.__proto__=b,a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var x=v;function j(a,b){if(a.prototype=y(b.prototype),a.prototype.constructor=a,x)x(a,b);else for(var t in b)if("prototype"!=t)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,t);e&&Object.defineProperty(a,t,e)}else a[t]=b[t];a.ya=b.prototype}function O(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function M(a){if(a.m)throw new TypeError("Generator is already running");a.m=!0}function A(a,b){a.l={ma:b,na:!0},a.h=a.s||a.v}function _(a,b,t){return a.h=t,{value:b}}function T(a){this.h=new O,this.i=a}function S(a,b,t,e){try{var n=b.call(a.h.j,t);if(!(n instanceof Object))throw new TypeError("Iterator result "+n+" is not an object");if(!n.done)return a.h.m=!1,n;var g=n.value}catch(t){return a.h.j=null,A(a.h,t),k(a)}return a.h.j=null,e.call(a.h,g),k(a)}function k(a){for(;a.h.h;)try{var b=a.i(a.h);if(b)return a.h.m=!1,{value:b.value,done:!1}}catch(t){a.h.i=void 0,A(a.h,t)}if(a.h.m=!1,a.h.l){if(b=a.h.l,a.h.l=null,b.na)throw b.ma;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function C(a){this.next=function(b){return M(a.h),a.h.j?b=S(a,a.h.j.next,b,a.h.u):(a.h.u(b),b=k(a)),b},this.throw=function(b){return M(a.h),a.h.j?b=S(a,a.h.j.throw,b,a.h.u):(A(a.h,b),b=k(a)),b},this.return=function(b){return function(a,b){M(a.h);var t=a.h.j;return t?S(a,"return"in t?t.return:function(t){return{value:t,done:!0}},b,a.h.return):(a.h.return(b),k(a))}(a,b)},this[Symbol.iterator]=function(){return this}}function E(a){return function(a){function b(t){return a.next(t)}function t(t){return a.throw(t)}return new Promise((function(e,n){!function g(r){r.done?e(r.value):Promise.resolve(r.value).then(b,t).then(g,n)}(a.next())}))}(new C(new T(a)))}function I(a){return a||Array.prototype.fill}O.prototype.u=function(a){this.i=a},O.prototype.return=function(a){this.l={return:a},this.h=this.v},h("Promise",(function(a){function b(t){this.i=0,this.j=void 0,this.h=[],this.u=!1;var e=this.l();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function t(){this.h=null}function e(t){return t instanceof b?t:new b((function(e){e(t)}))}if(a)return a;t.prototype.i=function(t){if(null==this.h){this.h=[];var e=this;this.j((function(){e.m()}))}this.h.push(t)};var n=o.setTimeout;t.prototype.j=function(t){n(t,0)},t.prototype.m=function(){for(;this.h&&this.h.length;){var t=this.h;this.h=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.l(t)}}}this.h=null},t.prototype.l=function(t){this.j((function(){throw t}))},b.prototype.l=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.I),reject:t(this.m)}},b.prototype.I=function(t){if(t===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof b)this.L(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.F(t):this.s(t)}},b.prototype.F=function(t){var e=void 0;try{e=t.then}catch(t){return void this.m(t)}"function"==typeof e?this.M(e,t):this.s(t)},b.prototype.m=function(t){this.v(2,t)},b.prototype.s=function(t){this.v(1,t)},b.prototype.v=function(t,e){if(0!=this.i)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.i);this.i=t,this.j=e,2===this.i&&this.K(),this.H()},b.prototype.K=function(){var t=this;n((function(){if(t.D()){var e=o.console;void 0!==e&&e.error(t.j)}}),1)},b.prototype.D=function(){if(this.u)return!1;var t=o.CustomEvent,e=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.j,n(t))},b.prototype.H=function(){if(null!=this.h){for(var t=0;t<this.h.length;++t)g.i(this.h[t]);this.h=null}};var g=new t;return b.prototype.L=function(t){var e=this.l();t.T(e.resolve,e.reject)},b.prototype.M=function(t,e){var n=this.l();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},b.prototype.then=function(t,e){function n(p,t){return"function"==typeof p?function(q){try{r(p(q))}catch(t){o(t)}}:t}var r,o,h=new b((function(p,t){r=p,o=t}));return this.T(n(t,r),n(e,o)),h},b.prototype.catch=function(t){return this.then(void 0,t)},b.prototype.T=function(t,e){function n(){switch(r.i){case 1:t(r.j);break;case 2:e(r.j);break;default:throw Error("Unexpected state: "+r.i)}}var r=this;null==this.h?g.i(n):this.h.push(n),this.u=!0},b.resolve=e,b.reject=function(t){return new b((function(e,n){n(t)}))},b.race=function(t){return new b((function(n,r){for(var o=l(t),h=o.next();!h.done;h=o.next())e(h.value).T(n,r)}))},b.all=function(t){var n=l(t),r=n.next();return r.done?e([]):new b((function(t,o){function h(q){return function(e){p[q]=e,0==--c&&t(p)}}var p=[],c=0;do{p.push(void 0),c++,e(r.value).T(h(p.length-1),o),r=n.next()}while(!r.done)}))},b})),h("Array.prototype.keys",(function(a){return a||function(){return function(a,b){a instanceof String&&(a+="");var t=0,e=!1,n={next:function(){if(!e&&t<a.length){var g=t++;return{value:b(g,a[g]),done:!1}}return e=!0,{done:!0,value:void 0}}};return n[Symbol.iterator]=function(){return n},n}(this,(function(b){return b}))}})),h("Array.prototype.fill",(function(a){return a||function(b,t,e){var n=this.length||0;for(0>t&&(t=Math.max(0,n+t)),(null==e||e>n)&&(e=n),0>(e=Number(e))&&(e=Math.max(0,n+e)),t=Number(t||0);t<e;t++)this[t]=b;return this}})),h("Int8Array.prototype.fill",I),h("Uint8Array.prototype.fill",I),h("Uint8ClampedArray.prototype.fill",I),h("Int16Array.prototype.fill",I),h("Uint16Array.prototype.fill",I),h("Int32Array.prototype.fill",I),h("Uint32Array.prototype.fill",I),h("Float32Array.prototype.fill",I),h("Float64Array.prototype.fill",I),h("Object.is",(function(a){return a||function(b,t){return b===t?0!==b||1/b==1/t:b!=b&&t!=t}})),h("Array.prototype.includes",(function(a){return a||function(b,t){var e=this;e instanceof String&&(e=String(e));var n=e.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var g=e[t];if(g===b||Object.is(g,b))return!0}return!1}})),h("String.prototype.includes",(function(a){return a||function(b,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(b,t||0)}}));var F=this||self;function R(a,b){a=a.split(".");var t,e=F;a[0]in e||void 0===e.execScript||e.execScript("var "+a[0]);for(;a.length&&(t=a.shift());)a.length||void 0===b?e=e[t]&&e[t]!==Object.prototype[t]?e[t]:e[t]={}:e[t]=b}function B(a){var b;return(b=F.navigator)&&(b=b.userAgent)||(b=""),-1!=b.indexOf(a)}var L=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n="string"==typeof a?a.split(""):a,g=0;g<t;g++)g in n&&(e[g]=b.call(void 0,n[g],g,a));return e},N={},P=null;function U(a){var b=a.length,t=3*b/4;t%3?t=Math.floor(t):-1!="=.".indexOf(a[b-1])&&(t=-1!="=.".indexOf(a[b-2])?t-2:t-1);var e=new Uint8Array(t),n=0;return function(a,b){function t(t){for(;e<a.length;){var n=a.charAt(e++),r=P[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}H();for(var e=0;;){var n=t(-1),g=t(0),r=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|g>>4),64!=r&&(b(g<<4&240|r>>2),64!=o&&b(r<<6&192|o))}}(a,(function(g){e[n++]=g})),n!==t?e.subarray(0,n):e}function H(){if(!P){P={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var e=a.concat(b[t].split(""));N[t]=e;for(var n=0;n<e.length;n++){var g=e[n];void 0===P[g]&&(P[g]=n)}}}}var z="undefined"!=typeof Uint8Array,D=!(B("Trident")||B("MSIE"))&&"function"==typeof F.btoa;function V(a){if(!D){var b;void 0===b&&(b=0),H(),b=N[b];for(var t=Array(Math.floor(a.length/3)),e=b[64]||"",n=0,g=0;n<a.length-2;n+=3){var r=a[n],o=a[n+1],h=a[n+2],c=b[r>>2];r=b[(3&r)<<4|o>>4],o=b[(15&o)<<2|h>>6],h=b[63&h],t[g++]=c+r+o+h}switch(c=0,h=e,a.length-n){case 2:h=b[(15&(c=a[n+1]))<<2]||e;case 1:a=a[n],t[g]=b[a>>2]+b[(3&a)<<4|c>>4]+h+e}return t.join("")}for(b="";10240<a.length;)b+=String.fromCharCode.apply(null,a.subarray(0,10240)),a=a.subarray(10240);return b+=String.fromCharCode.apply(null,a),btoa(b)}var Y,X=RegExp("[-_.]","g");function W(a){switch(a){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function G(a){if(!D)return U(a);X.test(a)&&(a=a.replace(X,W)),a=atob(a);for(var b=new Uint8Array(a.length),t=0;t<a.length;t++)b[t]=a.charCodeAt(t);return b}function K(){return Y||(Y=new Uint8Array(0))}var J={},Z="function"==typeof Uint8Array.prototype.slice,$=0,Q=0;function tt(a){var b=0>a,t=(a=Math.abs(a))>>>0;a=Math.floor((a-t)/4294967296),b&&(b=(t=l(it(t,a))).next().value,a=t.next().value,t=b),$=t>>>0,Q=a>>>0}var et,nt="function"==typeof BigInt;function it(a,b){return b=~b,a?a=1+~a:b+=1,[a,b]}function ot(a,b){this.i=a>>>0,this.h=b>>>0}function at(a){if(!a)return et||(et=new ot(0,0));if(!/^-?\d+$/.test(a))return null;if(16>a.length)tt(Number(a));else if(nt)a=BigInt(a),$=Number(a&BigInt(4294967295))>>>0,Q=Number(a>>BigInt(32)&BigInt(4294967295));else{var b=+("-"===a[0]);Q=$=0;for(var t=a.length,e=b,n=(t-b)%6+b;n<=t;e=n,n+=6)e=Number(a.slice(e,n)),Q*=1e6,4294967296<=($=1e6*$+e)&&(Q+=$/4294967296|0,$%=4294967296);b&&(a=(b=l(it($,Q))).next().value,b=b.next().value,$=a,Q=b)}return new ot($,Q)}function ut(a,b){return Error("Invalid wire type: "+a+" (at position "+b+")")}function st(){return Error("Failed to read varint, encoding is invalid.")}function ht(a,b){return Error("Tried to read past the end of the data "+b+" > "+a)}function ct(){throw Error("Invalid UTF8")}function lt(a,b){return b=String.fromCharCode.apply(null,b),null==a?b:a+b}var ft,pt,vt,yt=void 0,mt="undefined"!=typeof TextDecoder,gt="undefined"!=typeof TextEncoder;function bt(a){if(a!==J)throw Error("illegal external caller")}function wt(a,b){if(bt(b),this.V=a,null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values")}function xt(){return vt||(vt=new wt(null,J))}function jt(a){bt(J);var b=a.V;return null==(b=null==b||z&&null!=b&&b instanceof Uint8Array?b:"string"==typeof b?G(b):null)?b:a.V=b}function Ot(a,b){this.i=null,this.m=!1,this.h=this.j=this.l=0,Mt(this,a,b)}function Mt(a,b,t){t=void 0===t?{}:t,a.S=void 0!==t.S&&t.S,b&&(b=function(a){if("string"==typeof a)return{buffer:G(a),C:!1};if(Array.isArray(a))return{buffer:new Uint8Array(a),C:!1};if(a.constructor===Uint8Array)return{buffer:a,C:!1};if(a.constructor===ArrayBuffer)return{buffer:new Uint8Array(a),C:!1};if(a.constructor===wt)return{buffer:jt(a)||K(),C:!0};if(a instanceof Uint8Array)return{buffer:new Uint8Array(a.buffer,a.byteOffset,a.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(b),a.i=b.buffer,a.m=b.C,a.l=0,a.j=a.i.length,a.h=a.l)}function At(a,b){if(a.h=b,b>a.j)throw ht(a.j,b)}function _t(a){var b=a.i,t=a.h,e=b[t++],n=127&e;if(128&e&&(n|=(127&(e=b[t++]))<<7,128&e&&(n|=(127&(e=b[t++]))<<14,128&e&&(n|=(127&(e=b[t++]))<<21,128&e&&(n|=(e=b[t++])<<28,128&e&&128&b[t++]&&128&b[t++]&&128&b[t++]&&128&b[t++]&&128&b[t++])))))throw st();return At(a,t),n}function Tt(a,b){if(0>b)throw Error("Tried to read a negative byte length: "+b);var t=a.h,e=t+b;if(e>a.j)throw ht(b,a.j-t);return a.h=e,t}Ot.prototype.reset=function(){this.h=this.l};var St=[];function kt(){this.h=[]}function Ct(a,b,t){for(;0<t||127<b;)a.h.push(127&b|128),b=(b>>>7|t<<25)>>>0,t>>>=7;a.h.push(b)}function Et(a,b){for(;127<b;)a.h.push(127&b|128),b>>>=7;a.h.push(b)}function It(a,b){if(St.length){var t=St.pop();Mt(t,a,b),a=t}else a=new Ot(a,b);this.h=a,this.j=this.h.h,this.i=this.l=-1,this.setOptions(b)}function Ft(a){var b=a.h;if(b.h==b.j)return!1;a.j=a.h.h;var t=_t(a.h)>>>0;if(b=t>>>3,!(0<=(t&=7)&&5>=t))throw ut(t,a.j);if(1>b)throw Error("Invalid field number: "+b+" (at position "+a.j+")");return a.l=b,a.i=t,!0}function Rt(a){switch(a.i){case 0:if(0!=a.i)Rt(a);else t:{for(var b=(a=a.h).h,t=b+10,e=a.i;b<t;)if(0==(128&e[b++])){At(a,b);break t}throw st()}break;case 1:At(a=a.h,a.h+8);break;case 2:2!=a.i?Rt(a):(b=_t(a.h)>>>0,At(a=a.h,a.h+b));break;case 5:At(a=a.h,a.h+4);break;case 3:for(b=a.l;;){if(!Ft(a))throw Error("Unmatched start-group tag: stream EOF");if(4==a.i){if(a.l!=b)throw Error("Unmatched end-group tag");break}Rt(a)}break;default:throw ut(a.i,a.j)}}kt.prototype.length=function(){return this.h.length},kt.prototype.end=function(){var a=this.h;return this.h=[],a},It.prototype.setOptions=function(a){a=void 0===a?{}:a,this.ca=void 0!==a.ca&&a.ca},It.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var Bt=[];function Lt(){this.j=[],this.i=0,this.h=new kt}function Nt(a,b){0!==b.length&&(a.j.push(b),a.i+=b.length)}var Pt="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():void 0;function Ut(a,b){return Pt?a[Pt]|=b:void 0!==a.A?a.A|=b:(Object.defineProperties(a,{A:{value:b,configurable:!0,writable:!0,enumerable:!1}}),b)}function Ht(a,b){Pt?a[Pt]&&(a[Pt]&=~b):void 0!==a.A&&(a.A&=~b)}function zt(a){var b;return null==(b=Pt?a[Pt]:a.A)?0:b}function Dt(a,b){Pt?a[Pt]=b:void 0!==a.A?a.A=b:Object.defineProperties(a,{A:{value:b,configurable:!0,writable:!0,enumerable:!1}})}function Vt(a){return Ut(a,1),a}function Yt(a,b){Dt(b,-51&(0|a))}function Xt(a,b){Dt(b,-41&(18|a))}var Wt={};function Gt(a){return null!==a&&"object"==typeof a&&!Array.isArray(a)&&a.constructor===Object}var Kt,qt,Jt=[];function Zt(a){if(2&zt(a.o))throw Error("Cannot mutate an immutable Message")}function $t(a){var b=a.length;(b=b?a[b-1]:void 0)&&Gt(b)?b.g=1:(b={},a.push((b.g=1,b)))}function Qt(a){var b=a.i+a.G;return a.B||(a.B=a.o[b]={})}function te(a,b){return-1===b?null:b>=a.i?a.B?a.B[b]:void 0:a.o[b+a.G]}function ee(a,b,t,e){Zt(a),ne(a,b,t,e)}function ne(a,b,t,e){a.j&&(a.j=void 0),b>=a.i||e?Qt(a)[b]=t:(a.o[b+a.G]=t,(a=a.B)&&b in a&&delete a[b])}function re(a,b,t,e){var n=te(a,b);Array.isArray(n)||(n=Kt);var g=zt(n);if(1&g||Vt(n),e)2&g||Ut(n,2),1&t||Object.freeze(n);else{e=!(2&t);var r=2&g;1&t||!r?e&&16&g&&!r&&Ht(n,16):ne(a,b,n=Vt(Array.prototype.slice.call(n)))}return n}function ie(a,b){var t=te(a,b),e=null==t?t:"number"==typeof t||"NaN"===t||"Infinity"===t||"-Infinity"===t?Number(t):void 0;return null!=e&&e!==t&&ne(a,b,e),e}function oe(a,b,t,e,n){a.h||(a.h={});var g=a.h[t],r=re(a,t,3,n);if(!g){var o=r;g=[];var h=!!(16&zt(a.o));r=!!(2&zt(o));var c=o;!n&&r&&(o=Array.prototype.slice.call(o));for(var l=r,f=0;f<o.length;f++){var p=o[f],d=b,q=!1;if(q=void 0!==q&&q,void 0!==(p=Array.isArray(p)?new d(p):q?new d:void 0)){var v=q=zt(d=p.o);r&&(v|=2),h&&(v|=16),v!=q&&Dt(d,v),d=v,l=l||!!(2&d),g.push(p)}}return a.h[t]=g,b=33|(h=zt(o)),h!=(b=l?-9&b:8|b)&&(l=o,Object.isFrozen(l)&&(l=Array.prototype.slice.call(l)),Dt(l,b),o=l),c!==o&&ne(a,t,o),(n||e&&r)&&Ut(g,2),e&&Object.freeze(g),g}return n||(n=Object.isFrozen(g),e&&!n?Object.freeze(g):!e&&n&&(g=Array.prototype.slice.call(g),a.h[t]=g)),g}function ae(a,b,t){var e=!!(2&zt(a.o));if(b=oe(a,b,t,e,e),a=re(a,t,3,e),!(e||8&zt(a))){for(e=0;e<b.length;e++){if(2&zt((t=b[e]).o)){var n=ge(t,!1);n.j=t}else n=t;t!==n&&(b[e]=n,a[e]=n.o)}Ut(a,8)}return b}function ue(a,b,t){if(null!=t&&"number"!=typeof t)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof t+": "+t);ee(a,b,t)}function se(a,b,t,e,n){Zt(a);var g=oe(a,t,b,!1,!1);return t=null!=e?e:new t,a=re(a,b,2,!1),null!=n?(g.splice(n,0,t),a.splice(n,0,t.o)):(g.push(t),a.push(t.o)),t.C()&&Ht(a,8),t}function he(a,b){return null==a?b:a}function ce(a,b,t){return t=void 0===t?0:t,he(ie(a,b),t)}function le(a,b,t,e){if(null!=a){if(Array.isArray(a))a=fe(a,b,t,void 0!==e);else if(Gt(a)){var g,n={};for(g in a)n[g]=le(a[g],b,t,e);a=n}else a=b(a,e);return a}}function fe(a,b,t,e){var n=zt(a);e=e?!!(16&n):void 0,a=Array.prototype.slice.call(a);for(var g=0;g<a.length;g++)a[g]=le(a[g],b,t,e);return t(n,a),a}function de(a){return a.ja===Wt?a.toJSON():function(a){switch(typeof a){case"number":return isFinite(a)?a:String(a);case"object":if(a)if(Array.isArray(a)){if(0!=(128&zt(a)))return $t(a=Array.prototype.slice.call(a)),a}else{if(z&&null!=a&&a instanceof Uint8Array)return V(a);if(a instanceof wt){var b=a.V;return null==b?"":"string"==typeof b?b:a.V=V(b)}}}return a}(a)}function pe(a,b){128&a&&$t(b)}function ve(a,b,t){if(t=void 0===t?Xt:t,null!=a){if(z&&a instanceof Uint8Array)return a.length?new wt(new Uint8Array(a),J):xt();if(Array.isArray(a)){var e=zt(a);return 2&e?a:!b||32&e||!(16&e||0===e)?(4&(b=zt(a=fe(a,ve,4&e?Xt:t,!0)))&&2&b&&Object.freeze(a),a):(Dt(a,2|e),a)}return a.ja===Wt?me(a):a}}function ye(a,b,t,e,n,g,r){if(a=a.h&&a.h[t]){if(2&(e=zt(a))?e=a:(Xt(e,g=L(a,me)),Object.freeze(g),e=g),Zt(b),r=null==e?Kt:Vt([]),null!=e){for(g=!!e.length,a=0;a<e.length;a++){var o=e[a];g=g&&!(2&zt(o.o)),r[a]=o.o}g=1|(g?8:0),((a=zt(r))&g)!==g&&(Object.isFrozen(r)&&(r=Array.prototype.slice.call(r)),Dt(r,a|g)),b.h||(b.h={}),b.h[t]=e}else b.h&&(b.h[t]=void 0);ne(b,t,r,n)}else ee(b,t,ve(e,g,r),n)}function me(a){return 2&zt(a.o)||Ut((a=ge(a,!0)).o,2),a}function ge(a,b){var t=a.o,e=[];Ut(e,16);var n=a.constructor.h;if(n&&e.push(n),n=a.B){e.length=t.length,e.fill(void 0,e.length,t.length);var g={};e[e.length-1]=g}0!=(128&zt(t))&&$t(e),b=b||a.C()?Xt:Yt,g=a.constructor,qt=e,e=new g(e),qt=void 0,a.R&&(e.R=a.R.slice()),g=!!(16&zt(t));for(var r=n?t.length-1:t.length,o=0;o<r;o++)ye(a,e,o-a.G,t[o],!1,g,b);if(n)for(var h in n)ye(a,e,+h,n[h],!0,g,b);return e}function be(a,b,t){null==a&&(a=qt),qt=void 0;var e,n=this.constructor.i||0,r=0<n,g=this.constructor.h,o=!1;if(null==a){var h=48,c=!0;r&&(n=0,h|=128),Dt(a=g?[g]:[],h)}else{if(!Array.isArray(a))throw Error();if(g&&g!==a[0])throw Error();var l=h=Ut(a,0);if((c=0!=(16&l))&&((o=0!=(32&l))||(l|=32)),r){if(128&l)n=0;else if(0<a.length){var f=a[a.length-1];if(Gt(f)&&"g"in f){n=0,l|=128,delete f.g;var p,d=!0;for(p in f){d=!1;break}d&&a.pop()}}}else if(128&l)throw Error();h!==l&&Dt(a,l)}if(this.G=(g?0:-1)-n,this.h=void 0,this.o=a,n=(g=this.o.length)-1,g&&Gt(g=this.o[n])?(this.B=g,this.i=n-this.G):void 0!==b&&-1<b?(this.i=Math.max(b,n+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE,!r&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(t)for(b=c&&!o&&!0,r=this.i,c=0;c<t.length;c++)(o=t[c])<r?(n=a[o+=this.G])?we(n,b):a[o]=Kt:(e||(e=Qt(this)),(n=e[o])?we(n,b):e[o]=Kt)}function we(a,b){if(Array.isArray(a)){var t=zt(a),e=1;!b||2&t||(e|=16),(t&e)!==e&&Dt(a,t|e)}}function xe(a,b,t){if(t){var e,n={};for(e in t){var g=t[e],r=g.qa;r||(n.J=g.wa||g.oa.W,g.ia?(n.aa=ke(g.ia),r=function(t){return function(e,n,r){return t.J(e,n,r,t.aa)}}(n)):g.ka?(n.Z=Ce(g.da.P,g.ka),r=function(t){return function(e,n,r){return t.J(e,n,r,t.Z)}}(n)):r=n.J,g.qa=r),r(b,a,g.da),n={J:n.J,aa:n.aa,Z:n.Z}}}!function(a,b){if(b=b.R){Nt(a,a.h.end());for(var t=0;t<b.length;t++)Nt(a,jt(b[t])||K())}}(b,a)}Dt(Jt,23),Kt=Object.freeze(Jt),be.prototype.toJSON=function(){return fe(this.o,de,pe)},be.prototype.C=function(){return!!(2&zt(this.o))},be.prototype.ja=Wt,be.prototype.toString=function(){return this.o.toString()};var je=Symbol();function Oe(a,b,t){return a[je]||(a[je]=function(e,n){return b(e,n,t)})}function Me(a){var b=a[je];if(!b){var t=De(a);b=function(e,n){return Ve(e,n,t)},a[je]=b}return b}function Ae(a){var b=function(a){var b=a.ia;return b?Me(b):(b=a.va)?Oe(a.da.P,b,a.ka):void 0}(a),t=a.da,e=a.oa.U;return b?function(n,g){return e(n,g,t,b)}:function(n,g){return e(n,g,t)}}function _e(a,b){var t=a[b];return"function"==typeof t&&0===t.length&&(t=t(),a[b]=t),Array.isArray(t)&&(Ne in t||Ee in t||0<t.length&&"function"==typeof t[0])?t:void 0}function Te(a,b,t,e,n,g){b.P=a[0];var r=1;if(a.length>r&&"number"!=typeof a[r]){var o=a[r++];t(b,o)}for(;r<a.length;){t=a[r++];for(var h=r+1;h<a.length&&"number"!=typeof a[h];)h++;switch(o=a[r++],h-=r){case 0:e(b,t,o);break;case 1:(h=_e(a,r))?(r++,n(b,t,o,h)):e(b,t,o,a[r++]);break;case 2:n(b,t,o,h=_e(a,h=r++),a[r++]);break;case 3:g(b,t,o,a[r++],a[r++],a[r++]);break;case 4:g(b,t,o,a[r++],a[r++],a[r++],a[r++]);break;default:throw Error("unexpected number of binary field arguments: "+h)}}return b}var Se=Symbol();function ke(a){var b=a[Se];if(!b){var t=Le(a);b=function(e,n){return Ye(e,n,t)},a[Se]=b}return b}function Ce(a,b){var t=a[Se];return t||(t=function(t,e){return xe(t,e,b)},a[Se]=t),t}var Ee=Symbol();function Ie(a,b){a.push(b)}function Fe(a,b,t){a.push(b,t.W)}function Re(a,b,t,e){var n=ke(e),g=Le(e).P,r=t.W;a.push(b,(function(t,e,o){return r(t,e,o,g,n)}))}function Be(a,b,t,e,n,g){var r=Ce(e,g),o=t.W;a.push(b,(function(t,n,h){return o(t,n,h,e,r)}))}function Le(a){var b=a[Ee];return b||(b=Te(a,a[Ee]=[],Ie,Fe,Re,Be),Ne in a&&Ee in a&&(a.length=0),b)}var Ne=Symbol();function Pe(a,b){a[0]=b}function Ue(a,b,t,e){var n=t.U;a[b]=e?function(g,t,r){return n(g,t,r,e)}:n}function He(a,b,t,e,n){var g=t.U,r=Me(e),o=De(e).P;a[b]=function(t,e,h){return g(t,e,h,o,r,n)}}function ze(a,b,t,e,n,g,r){var o=t.U,h=Oe(e,n,g);a[b]=function(t,n,c){return o(t,n,c,e,h,r)}}function De(a){var b=a[Ne];return b||(b=Te(a,a[Ne]={},Pe,Ue,He,ze),Ne in a&&Ee in a&&(a.length=0),b)}function Ve(a,b,t){for(;Ft(b)&&4!=b.i;){var e=b.l,n=t[e];if(!n){var g=t[0];g&&(g=g[e])&&(n=t[e]=Ae(g))}if(!n||!n(b,a,e)){e=a,g=(n=b).j,Rt(n);var r=n;if(!r.ca){if(n=r.h.h-g,r.h.h=g,r=r.h,0==n)n=xt();else{if(g=Tt(r,n),r.S&&r.m)n=r.i.subarray(g,g+n);else{r=r.i;var o=g;n=o===(n=g+n)?K():Z?r.slice(o,n):new Uint8Array(r.subarray(o,n))}n=0==n.length?xt():new wt(n,J)}(g=e.R)?g.push(n):e.R=[n]}}}return a}function Ye(a,b,t){for(var e=t.length,n=1==e%2,g=n?1:0;g<e;g+=2)(0,t[g+1])(b,a,t[g]);xe(a,b,n?t[0]:void 0)}function Xe(a,b){return{U:a,W:b}}var We=Xe((function(a,b,t){if(5!==a.i)return!1;var e=(a=a.h).i,n=a.h,g=e[n],r=e[n+1],o=e[n+2];return e=e[n+3],At(a,a.h+4),a=2*((r=(g<<0|r<<8|o<<16|e<<24)>>>0)>>31)+1,g=r>>>23&255,r&=8388607,ee(b,t,255==g?r?NaN:1/0*a:0==g?a*Math.pow(2,-149)*r:a*Math.pow(2,g-150)*(r+Math.pow(2,23))),!0}),(function(a,b,t){if(null!=(b=ie(b,t))){Et(a.h,8*t+5),a=a.h;var e=+b;0===e?0<1/e?$=Q=0:(Q=0,$=2147483648):isNaN(e)?(Q=0,$=2147483647):34028234663852886e22<(e=(t=0>e?-2147483648:0)?-e:e)?(Q=0,$=(2139095040|t)>>>0):11754943508222875e-54>e?(e=Math.round(e/Math.pow(2,-149)),Q=0,$=(t|e)>>>0):(b=Math.floor(Math.log(e)/Math.LN2),e*=Math.pow(2,-b),16777216<=(e=Math.round(8388608*e))&&++b,Q=0,$=(t|b+127<<23|8388607&e)>>>0),t=$,a.h.push(t>>>0&255),a.h.push(t>>>8&255),a.h.push(t>>>16&255),a.h.push(t>>>24&255)}})),Ge=Xe((function(a,b,t){if(0!==a.i)return!1;var e=a.h,n=0,g=a=0,r=e.i,o=e.h;do{var h=r[o++];n|=(127&h)<<g,g+=7}while(32>g&&128&h);for(32<g&&(a|=(127&h)>>4),g=3;32>g&&128&h;g+=7)a|=(127&(h=r[o++]))<<g;if(At(e,o),!(128>h))throw st();return e=n>>>0,(a=2147483648&(h=a>>>0))&&(h=~h>>>0,0==(e=1+~e>>>0)&&(h=h+1>>>0)),e=4294967296*h+(e>>>0),ee(b,t,a?-e:e),!0}),(function(a,b,t){null!=(b=te(b,t))&&("string"==typeof b&&at(b),null!=b&&(Et(a.h,8*t),"number"==typeof b?(a=a.h,tt(b),Ct(a,$,Q)):(t=at(b),Ct(a.h,t.i,t.h))))})),Ke=Xe((function(a,b,t){return 0===a.i&&(ee(b,t,_t(a.h)),!0)}),(function(a,b,t){if(null!=(b=te(b,t))&&null!=b)if(Et(a.h,8*t),a=a.h,0<=(t=b))Et(a,t);else{for(b=0;9>b;b++)a.h.push(127&t|128),t>>=7;a.h.push(1)}})),qe=Xe((function(a,b,t){if(2!==a.i)return!1;var e=_t(a.h)>>>0,n=Tt(a=a.h,e);if(a=a.i,mt){var r,g=a;(r=ft)||(r=ft=new TextDecoder("utf-8",{fatal:!0})),a=n+e,g=0===n&&a===g.length?g:g.subarray(n,a);try{var o=r.decode(g)}catch(t){if(void 0===yt){try{r.decode(new Uint8Array([128]))}catch(t){}try{r.decode(new Uint8Array([97])),yt=!0}catch(t){yt=!1}}throw!yt&&(ft=void 0),t}}else{e=(o=n)+e,n=[];for(var h,c,l=null;o<e;)128>(h=a[o++])?n.push(h):224>h?o>=e?ct():(c=a[o++],194>h||128!=(192&c)?(o--,ct()):n.push((31&h)<<6|63&c)):240>h?o>=e-1?ct():128!=(192&(c=a[o++]))||224===h&&160>c||237===h&&160<=c||128!=(192&(g=a[o++]))?(o--,ct()):n.push((15&h)<<12|(63&c)<<6|63&g):244>=h?o>=e-2?ct():128!=(192&(c=a[o++]))||0!=c-144+(h<<28)>>30||128!=(192&(g=a[o++]))||128!=(192&(r=a[o++]))?(o--,ct()):(h=(7&h)<<18|(63&c)<<12|(63&g)<<6|63&r,h-=65536,n.push(55296+(h>>10&1023),56320+(1023&h))):ct(),8192<=n.length&&(l=lt(l,n),n.length=0);o=lt(l,n)}return ee(b,t,o),!0}),(function(a,b,t){if(null!=(b=te(b,t))){var e=!1;if(e=void 0!==e&&e,gt){if(e&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(b))throw Error("Found an unpaired surrogate");b=(pt||(pt=new TextEncoder)).encode(b)}else{for(var n=0,g=new Uint8Array(3*b.length),r=0;r<b.length;r++){var o=b.charCodeAt(r);if(128>o)g[n++]=o;else{if(2048>o)g[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&r<b.length){var h=b.charCodeAt(++r);if(56320<=h&&57343>=h){o=1024*(o-55296)+h-56320+65536,g[n++]=o>>18|240,g[n++]=o>>12&63|128,g[n++]=o>>6&63|128,g[n++]=63&o|128;continue}r--}if(e)throw Error("Found an unpaired surrogate");o=65533}g[n++]=o>>12|224,g[n++]=o>>6&63|128}g[n++]=63&o|128}}b=n===g.length?g:g.subarray(0,n)}Et(a.h,8*t+2),Et(a.h,b.length),Nt(a,a.h.end()),Nt(a,b)}})),Je=Xe((function(a,b,t,e,n){if(2!==a.i)return!1;b=se(b,t,e),t=a.h.j,e=_t(a.h)>>>0;var g=a.h.h+e,r=g-t;if(0>=r&&(a.h.j=g,n(b,a,void 0,void 0,void 0),r=g-a.h.h),r)throw Error("Message parsing ended unexpectedly. Expected to read "+e+" bytes, instead read "+(e-r)+" bytes, either the data ended unexpectedly or the message misreported its own length");return a.h.h=g,a.h.j=t,!0}),(function(a,b,t,e,n){if(null!=(b=ae(b,e,t)))for(e=0;e<b.length;e++){var g=a;Et(g.h,8*t+2);var r=g.h.end();Nt(g,r),r.push(g.i),g=r,n(b[e],a),r=a;var o=g.pop();for(o=r.i+r.h.length()-o;127<o;)g.push(127&o|128),o>>>=7,r.i++;g.push(o),r.i++}}));function Ze(a){return function(b,t){t:{if(Bt.length){var e=Bt.pop();e.setOptions(t),Mt(e.h,b,t),b=e}else b=new It(b,t);try{var n=De(a),g=Ve(new n.P,b,n);break t}finally{(n=b.h).i=null,n.m=!1,n.l=0,n.j=0,n.h=0,n.S=!1,b.l=-1,b.i=-1,100>Bt.length&&Bt.push(b)}g=void 0}return g}}function $e(a){return function(){var b=new Lt;Ye(this,b,Le(a)),Nt(b,b.h.end());for(var t=new Uint8Array(b.i),e=b.j,n=e.length,g=0,r=0;r<n;r++){var o=e[r];t.set(o,g),g+=o.length}return b.j=[t],t}}function Qe(a){be.call(this,a)}j(Qe,be);var tn=[Qe,1,Ke,2,We,3,qe,4,qe];function en(a){be.call(this,a,-1,nn)}Qe.prototype.l=$e(tn),j(en,be),en.prototype.addClassification=function(a,b){return se(this,1,Qe,a,b),this};var nn=[1],rn=Ze([en,1,Je,tn]);function on(a){be.call(this,a)}j(on,be);var an=[on,1,We,2,We,3,We,4,We,5,We];function un(a){be.call(this,a,-1,sn)}on.prototype.l=$e(an),j(un,be);var sn=[1],hn=Ze([un,1,Je,an]);function cn(a){be.call(this,a)}j(cn,be);var ln=[cn,1,We,2,We,3,We,4,We,5,We,6,Ge],fn=Ze(ln);function dn(a,b,t){if(t=a.createShader(0===t?a.VERTEX_SHADER:a.FRAGMENT_SHADER),a.shaderSource(t,b),a.compileShader(t),!a.getShaderParameter(t,a.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+a.getShaderInfoLog(t));return t}function pn(a){return ae(a,Qe,1).map((function(b){var t=te(b,1);return{index:null==t?0:t,score:ce(b,2),label:null!=te(b,3)?he(te(b,3),""):void 0,displayName:null!=te(b,4)?he(te(b,4),""):void 0}}))}function vn(a){return{x:ce(a,1),y:ce(a,2),z:ce(a,3),visibility:null!=ie(a,4)?ce(a,4):void 0}}function yn(a){return a.map((function(b){return ae(hn(b),on,1).map(vn)}))}function mn(a,b){this.i=a,this.h=b,this.m=0}function gn(a,b,t){return function(a,b){var t=a.h;if(void 0===a.s){var e=dn(t,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),n=dn(t,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),g=t.createProgram();if(t.attachShader(g,e),t.attachShader(g,n),t.linkProgram(g),!t.getProgramParameter(g,t.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+t.getProgramInfoLog(g));e=a.s=g,t.useProgram(e),n=t.getUniformLocation(e,"sampler0"),a.l={O:t.getAttribLocation(e,"aVertex"),N:t.getAttribLocation(e,"aTex"),xa:n},a.v=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.v),t.enableVertexAttribArray(a.l.O),t.vertexAttribPointer(a.l.O,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),a.u=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.u),t.enableVertexAttribArray(a.l.N),t.vertexAttribPointer(a.l.N,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.uniform1i(n,0)}e=a.l,t.useProgram(a.s),t.canvas.width=b.width,t.canvas.height=b.height,t.viewport(0,0,b.width,b.height),t.activeTexture(t.TEXTURE0),a.i.bindTexture2d(b.glName),t.enableVertexAttribArray(e.O),t.bindBuffer(t.ARRAY_BUFFER,a.v),t.vertexAttribPointer(e.O,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.N),t.bindBuffer(t.ARRAY_BUFFER,a.u),t.vertexAttribPointer(e.N,2,t.FLOAT,!1,0,0),t.bindFramebuffer(t.DRAW_FRAMEBUFFER?t.DRAW_FRAMEBUFFER:t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.colorMask(!0,!0,!0,!0),t.drawArrays(t.TRIANGLE_FAN,0,4),t.disableVertexAttribArray(e.O),t.disableVertexAttribArray(e.N),t.bindBuffer(t.ARRAY_BUFFER,null),a.i.bindTexture2d(0)}(a,b),"function"==typeof a.h.canvas.transferToImageBitmap?Promise.resolve(a.h.canvas.transferToImageBitmap()):t?Promise.resolve(a.h.canvas):"function"==typeof createImageBitmap?createImageBitmap(a.h.canvas):(void 0===a.j&&(a.j=document.createElement("canvas")),new Promise((function(t){a.j.height=a.h.canvas.height,a.j.width=a.h.canvas.width,a.j.getContext("2d",{}).drawImage(a.h.canvas,0,0,a.h.canvas.width,a.h.canvas.height),t(a.j)})))}function bn(a){this.h=a}cn.prototype.l=$e(ln);var wn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function xn(a,b){return b+a}function jn(a,b){window[a]=b}function On(a){if(this.h=a,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=a&&a.locateFile||xn,"object"==typeof window)var b=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");b=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ha=b,a.options)for(var t=(b=l(Object.keys(a.options))).next();!t.done;t=b.next()){t=t.value;var e=a.options[t].default;void 0!==e&&(this.l[t]="function"==typeof e?e():e)}}function Mn(a){var b,t,e,n,g,r,o,h,c,l,d;return E((function(p){switch(p.h){case 1:return a.ga?(b=void 0===a.h.files?[]:"function"==typeof a.h.files?a.h.files(a.l):a.h.files,_(p,E((function(a){switch(a.h){case 1:return a.s=2,_(a,WebAssembly.instantiate(wn),4);case 4:a.h=3,a.s=0;break;case 2:return a.s=0,a.l=null,a.return(!1);case 3:return a.return(!0)}})),2)):p.return();case 2:if(t=p.i,"object"==typeof window)return jn("createMediapipeSolutionsWasm",{locateFile:a.locateFile}),jn("createMediapipeSolutionsPackedAssets",{locateFile:a.locateFile}),r=b.filter((function(t){return void 0!==t.data})),o=b.filter((function(t){return void 0===t.data})),h=Promise.all(r.map((function(t){var q=An(a,t.url);if(void 0!==t.path){var e=t.path;q=q.then((function(t){return a.overrideFile(e,t),Promise.resolve(t)}))}return q}))),c=Promise.all(o.map((function(e){return void 0===e.simd||e.simd&&t||!e.simd&&!t?function(a){var b=document.createElement("script");return b.setAttribute("src",a),b.setAttribute("crossorigin","anonymous"),new Promise((function(t){b.addEventListener("load",(function(){t()}),!1),b.addEventListener("error",(function(){t()}),!1),document.body.appendChild(b)}))}(a.locateFile(e.url,a.ha)):Promise.resolve()}))).then((function(){var t,q,e;return E((function(n){if(1==n.h)return t=window.createMediapipeSolutionsWasm,q=window.createMediapipeSolutionsPackedAssets,e=a,_(n,t(q),2);e.i=n.i,n.h=0}))})),l=E((function(t){return a.h.graph&&a.h.graph.url?t=_(t,An(a,a.h.graph.url),0):(t.h=0,t=void 0),t})),_(p,Promise.all([c,h,l]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return e=b.filter((function(e){return void 0===e.simd||e.simd&&t||!e.simd&&!t})).map((function(t){return a.locateFile(t.url,a.ha)})),importScripts.apply(null,f(e)),n=a,_(p,createMediapipeSolutionsWasm(Module),6);case 6:n.i=p.i,a.m=new OffscreenCanvas(1,1),a.i.canvas=a.m,g=a.i.GL.createContext(a.m,{antialias:!1,alpha:!1,ua:"undefined"!=typeof WebGL2RenderingContext?2:1}),a.i.GL.makeContextCurrent(g),p.h=4;break;case 7:if(a.m=document.createElement("canvas"),!(d=a.m.getContext("webgl2",{}))&&!(d=a.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();a.K=d,a.i.canvas=a.m,a.i.createContext(a.m,!0,!0,{});case 4:a.j=new a.i.SolutionWasm,a.ga=!1,p.h=0}}))}function An(a,b){var t,e;return E((function(n){return b in a.L?n.return(a.L[b]):(t=a.locateFile(b,""),e=fetch(t).then((function(g){return g.arrayBuffer()})),a.L[b]=e,n.return(e))}))}function _n(a,b,t){var e,n,g,r,o,h,c,f,d,p,v,q,y,m;return E((function(w){switch(w.h){case 1:if(!t)return w.return(b);for(e={},n=0,g=l(Object.keys(t)),r=g.next();!r.done;r=g.next())o=r.value,"string"!=typeof(h=t[o])&&"texture"===h.type&&void 0!==b[h.stream]&&++n;1<n&&(a.M=!1),c=l(Object.keys(t)),r=c.next();case 2:if(r.done){w.h=4;break}if(f=r.value,"string"==typeof(d=t[f]))return y=e,m=f,_(w,function(a,b,t){var e;return E((function(n){return"number"==typeof t||t instanceof Uint8Array||t instanceof a.i.Uint8BlobList?n.return(t):t instanceof a.i.Texture2dDataOut?((e=a.v[b])||(e=new mn(a.i,a.K),a.v[b]=e),n.return(gn(e,t,a.M))):n.return(void 0)}))}(a,f,b[d]),14);if(p=b[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),j=p.getLandmarksList(),O=p.getClassificationsList(),u=[],M=0;M<x.size();++M){var A=fn(x.get(M)),T=void 0;T=void 0===T?0:T,A={la:{ra:ce(A,1),sa:ce(A,2),height:ce(A,3),width:ce(A,4),rotation:ce(A,5,0),pa:he(te(A,6),T)},ea:ae(hn(j.get(M)),on,1).map(vn),ba:pn(rn(O.get(M)))},u.push(A)}x=u}else x=[];e[f]=x,w.h=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),j=0;j<p.size();j++)x[j]=p.get(j);p.delete()}else x=[];e[f]=x,w.h=7;break}if(void 0===p){w.h=3;break}if("float_list"===d.type){e[f]=p,w.h=7;break}if("proto"===d.type){e[f]=p,w.h=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(v=a.v[f])||(v=new mn(a.i,a.K),a.v[f]=v),_(w,gn(v,p,a.M),13);case 13:q=w.i,e[f]=q;case 7:d.transform&&e[f]&&(e[f]=d.transform(e[f])),w.h=3;break;case 14:y[m]=w.i;case 3:r=c.next(),w.h=2;break;case 4:return w.return(e)}}))}function Tn(a,b){for(var t=b.name||"$",e=[].concat(f(b.wants)),n=new a.i.StringList,g=l(b.wants),r=g.next();!r.done;r=g.next())n.push_back(r.value);g=a.i.PacketListener.implement({onResults:function(n){for(var r={},o=0;o<b.wants.length;++o)r[e[o]]=n.get(o);var h=a.listeners[t];h&&(a.I=_n(a,r,b.outs).then((function(t){t=h(t);for(var p=0;p<b.wants.length;++p){var n=r[e[p]];"object"==typeof n&&n.hasOwnProperty&&n.hasOwnProperty("delete")&&n.delete()}t&&(a.I=t)})))}}),a.j.attachMultiListener(n,g),n.delete()}function Sn(a){return void 0===a&&(a=0),1===a?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function kn(a){var b=this;a=a||{},this.h=new On({locateFile:a.locateFile,files:function(t){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Sn(t.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:yn},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:yn},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(t){return t.map((function(t){return pn(rn(t))[0]}))}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(t){var e,n,g;return E((function(r){return 1==r.h?(e=Sn(t),n="third_party/mediapipe/modules/hand_landmark/"+e,_(r,An(b.h,e),2)):(g=r.i,b.h.overrideFile(n,g),r.return(!0))}))}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=On.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},e.reset=function(){var a=this;return E((function(b){a.j&&(a.j.reset(),a.s={},a.v={}),b.h=0}))},e.setOptions=function(a,b){var t=this;if(b=b||this.h.options){for(var e=[],n=[],g={},r=l(Object.keys(a)),o=r.next();!o.done;g={X:g.X,Y:g.Y},o=r.next())if(!((o=o.value)in this.l)||this.l[o]!==a[o]){this.l[o]=a[o];var h=b[o];void 0!==h&&(h.onChange&&(g.X=h.onChange,g.Y=a[o],e.push(function(e){return function(){return E((function(n){if(1==n.h)return _(n,e.X(e.Y),2);!0===n.i&&(t.u=!0),n.h=0}))}}(g))),h.graphOptionXref&&(o=Object.assign({},{calculatorName:"",calculatorIndex:0},h.graphOptionXref,{valueNumber:1===h.type?a[o]:0,valueBoolean:0===h.type&&a[o],valueString:2===h.type?a[o]:""}),n.push(o)))}0===e.length&&0===n.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(n),this.F=(void 0===this.F?[]:this.F).concat(e))}},e.initialize=function(){var a=this;return E((function(b){return 1==b.h?_(b,Mn(a),2):3!=b.h?_(b,function(a){var b,t,e,n,g,r,o,h;return E((function(c){if(1==c.h)return a.h.graph&&a.h.graph.url&&a.fa===a.h.graph.url?c.return():(a.u=!0,a.h.graph&&a.h.graph.url?(a.fa=a.h.graph.url,_(c,An(a,a.h.graph.url),3)):void(c.h=2));for(2!=c.h&&(b=c.i,a.j.loadGraph(b)),t=l(Object.keys(a.D)),e=t.next();!e.done;e=t.next())n=e.value,a.j.overrideFile(n,a.D[n]);if(a.D={},a.h.listeners)for(g=l(a.h.listeners),r=g.next();!r.done;r=g.next())o=r.value,Tn(a,o);h=a.l,a.l={},a.setOptions(h),c.h=0}))}(a),3):_(b,function(a){var b,t,e,g,n,r;return E((function(o){switch(o.h){case 1:if(!a.u)return o.return();if(!a.F){o.h=2;break}b=l(a.F),t=b.next();case 3:if(t.done){o.h=5;break}return _(o,(0,t.value)(),4);case 4:t=b.next(),o.h=3;break;case 5:a.F=void 0;case 2:if(a.H){for(e=new a.i.GraphOptionChangeRequestList,g=l(a.H),n=g.next();!n.done;n=g.next())r=n.value,e.push_back(r);a.j.changeOptions(e),e.delete(),a.H=void 0}a.u=!1,o.h=0}}))}(a),0)}))},e.overrideFile=function(a,b){this.j?this.j.overrideFile(a,b):this.D[a]=b},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(a,b){var t,e,g,n,r,o,h,c,f,d=this;return E((function(p){switch(p.h){case 1:return d.h.inputs?(t=1e3*(null==b?performance.now():b),_(p,d.I,2)):p.return();case 2:return _(p,d.initialize(),3);case 3:for(e=new d.i.PacketDataList,g=l(Object.keys(a)),n=g.next();!n.done;n=g.next())if(r=n.value,o=d.h.inputs[r]){t:{var v=a[r];switch(o.type){case"video":var q=d.s[o.stream];if(q||(q=new mn(d.i,d.K),d.s[o.stream]=q),0===q.m&&(q.m=q.i.createTexture()),"undefined"!=typeof HTMLVideoElement&&v instanceof HTMLVideoElement)var y=v.videoWidth,m=v.videoHeight;else"undefined"!=typeof HTMLImageElement&&v instanceof HTMLImageElement?(y=v.naturalWidth,m=v.naturalHeight):(y=v.width,m=v.height);m={glName:q.m,width:y,height:m},(y=q.h).canvas.width=m.width,y.canvas.height=m.height,y.activeTexture(y.TEXTURE0),q.i.bindTexture2d(q.m),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,v),q.i.bindTexture2d(0),q=m;break t;case"detections":for((q=d.s[o.stream])||(q=new bn(d.i),d.s[o.stream]=q),q.data||(q.data=new q.h.DetectionListData),q.data.reset(v.length),m=0;m<v.length;++m){y=v[m];var w=q.data,x=w.setBoundingBox,j=m,O=y.la,u=new cn;if(ue(u,1,O.ra),ue(u,2,O.sa),ue(u,3,O.height),ue(u,4,O.width),ue(u,5,O.rotation),ee(u,6,O.pa),O=u.l(),x.call(w,j,O),y.ea)for(w=0;w<y.ea.length;++w){u=y.ea[w],j=(x=q.data).addNormalizedLandmark,O=m,u=Object.assign({},u,{visibility:u.visibility?u.visibility:0});var M=new on;ue(M,1,u.x),ue(M,2,u.y),ue(M,3,u.z),u.visibility&&ue(M,4,u.visibility),u=M.l(),j.call(x,O,u)}if(y.ba)for(w=0;w<y.ba.length;++w)j=(x=q.data).addClassification,O=m,u=y.ba[w],ue(M=new Qe,2,u.score),u.index&&ee(M,1,u.index),u.label&&ee(M,3,u.label),u.displayName&&ee(M,4,u.displayName),u=M.l(),j.call(x,O,u)}q=q.data;break t;default:q={}}}switch(h=q,c=o.stream,o.type){case"video":e.pushTexture2d(Object.assign({},h,{stream:c,timestamp:t}));break;case"detections":(f=h).stream=c,f.timestamp=t,e.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+o.type+"'")}}return d.j.send(e),_(p,d.I,4);case 4:e.delete(),p.h=0}}))},e.onResults=function(a,b){this.listeners[b||"$"]=a},R("Solution",On),R("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=kn.prototype).close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(a){this.h.onResults(a)},e.initialize=function(){var a=this;return E((function(b){return _(b,a.h.initialize(),0)}))},e.reset=function(){this.h.reset()},e.send=function(a){var b=this;return E((function(t){return _(t,b.h.send(a),0)}))},e.setOptions=function(a){this.h.setOptions(a)},R("Hands",kn),R("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),R("VERSION","0.4.1675469240")}).call(this)}).call(this,n(56))}}]);